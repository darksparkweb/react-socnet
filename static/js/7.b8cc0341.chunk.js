(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[7],{1e3:function(e,t,r){"use strict";r.r(t);var n=r(980),c=r(0),a=r.n(c),o=r(5),s=r(2),i=r(19),l=r(7),u=r(3),f=r.n(u),b=r(54),p=r(46),j=r(962),m=r(60),d=r(167);var O=function(){var e=Object(c.useState)({}),t=Object(l.a)(e,2),r=t[0],n=t[1];return Object(c.useEffect)((function(){var e=d.a.subscribe((function(e){n(e)}));return function(){return d.a.unsubscribe(e)}}),[]),r},v=c.createContext("default"),g=function(e){var t=e.children,r=e.size;return c.createElement(v.Consumer,null,(function(e){return c.createElement(v.Provider,{value:r||e},t)}))},h=v,y=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(r[n[c]]=e[n[c]])}return r},x=function(e,t){var r,n,a=c.useContext(h),u=c.useState(1),v=Object(l.a)(u,2),g=v[0],x=v[1],E=c.useState(!1),S=Object(l.a)(E,2),C=S[0],P=S[1],w=c.useState(!0),N=Object(l.a)(w,2),z=N[0],k=N[1],T=c.useRef(),H=c.useRef(),R=Object(p.a)(t,T),M=c.useContext(j.b).getPrefixCls,A=function(){if(H.current&&T.current){var t=H.current.offsetWidth,r=T.current.offsetWidth;if(0!==t&&0!==r){var n=e.gap,c=void 0===n?4:n;2*c<r&&x(r-2*c<t?(r-2*c)/t:1)}}};c.useEffect((function(){P(!0)}),[]),c.useEffect((function(){k(!0),x(1)}),[e.src]),c.useEffect((function(){A()}),[e.gap]);var I=e.prefixCls,W=e.shape,D=e.size,J=e.src,V=e.srcSet,B=e.icon,F=e.className,G=e.alt,L=e.draggable,X=e.children,Y=y(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children"]),q="default"===D?a:D,K=O(),Q=c.useMemo((function(){if("object"!==Object(i.a)(q))return{};var e=d.b.find((function(e){return K[e]})),t=q[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:B?t/2:18}:{}}),[K,q]);Object(m.a)(!("string"===typeof B&&B.length>2),"Avatar","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(B,"` at https://ant.design/components/icon"));var U,Z=M("avatar",I),$=f()((r={},Object(s.a)(r,"".concat(Z,"-lg"),"large"===q),Object(s.a)(r,"".concat(Z,"-sm"),"small"===q),r)),_=c.isValidElement(J),ee=f()(Z,$,(n={},Object(s.a)(n,"".concat(Z,"-").concat(W),W),Object(s.a)(n,"".concat(Z,"-image"),_||J&&z),Object(s.a)(n,"".concat(Z,"-icon"),B),n),F),te="number"===typeof q?{width:q,height:q,lineHeight:"".concat(q,"px"),fontSize:B?q/2:18}:{};if("string"===typeof J&&z)U=c.createElement("img",{src:J,draggable:L,srcSet:V,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&k(!1)},alt:G});else if(_)U=J;else if(B)U=B;else if(C||1!==g){var re="scale(".concat(g,") translateX(-50%)"),ne={msTransform:re,WebkitTransform:re,transform:re},ce="number"===typeof q?{lineHeight:"".concat(q,"px")}:{};U=c.createElement(b.default,{onResize:A},c.createElement("span",{className:"".concat(Z,"-string"),ref:function(e){H.current=e},style:Object(o.a)(Object(o.a)({},ce),ne)},X))}else U=c.createElement("span",{className:"".concat(Z,"-string"),style:{opacity:0},ref:function(e){H.current=e}},X);return delete Y.onError,delete Y.gap,c.createElement("span",Object(o.a)({},Y,{style:Object(o.a)(Object(o.a)(Object(o.a)({},te),Q),Y.style),className:ee,ref:R}),U)},E=c.forwardRef(x);E.displayName="Avatar",E.defaultProps={shape:"circle",size:"default"};var S=E,C=r(49),P=r(88),w=r(300),N=function(e){return e?"function"===typeof e?e():e:null},z=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(r[n[c]]=e[n[c]])}return r},k=c.forwardRef((function(e,t){var r=e.prefixCls,n=e.title,a=e.content,s=z(e,["prefixCls","title","content"]),i=(0,c.useContext(j.b).getPrefixCls)("popover",r);return c.createElement(w.a,Object(o.a)({},s,{prefixCls:i,ref:t,overlay:function(e){return c.createElement(c.Fragment,null,n&&c.createElement("div",{className:"".concat(e,"-title")},N(n)),c.createElement("div",{className:"".concat(e,"-inner-content")},N(a)))}(i)}))}));k.displayName="Popover",k.defaultProps={placement:"top",transitionName:"zoom-big",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}};var T=k,H=function(e){var t=c.useContext(j.b),r=t.getPrefixCls,n=t.direction,a=e.prefixCls,o=e.className,i=void 0===o?"":o,l=e.maxCount,u=e.maxStyle,b=e.size,p=r("avatar-group",a),m=f()(p,Object(s.a)({},"".concat(p,"-rtl"),"rtl"===n),i),d=e.children,O=e.maxPopoverPlacement,v=void 0===O?"top":O,h=Object(C.a)(d).map((function(e,t){return Object(P.a)(e,{key:"avatar-key-".concat(t)})})),y=h.length;if(l&&l<y){var x=h.slice(0,l),E=h.slice(l,y);return x.push(c.createElement(T,{key:"avatar-popover-key",content:E,trigger:"hover",placement:v,overlayClassName:"".concat(p,"-popover")},c.createElement(S,{style:u},"+".concat(y-l)))),c.createElement(g,{size:b},c.createElement("div",{className:m,style:e.style},x))}return c.createElement(g,{size:b},c.createElement("div",{className:m,style:e.style},h))},R=S;R.Group=H;var M=R,A=r(998),I=r(954),W=r(40),D=r(423),J=r(10),V=function(){var e=Object(W.c)(),t=Object(W.d)((function(e){return e.chat.status}));return Object(c.useEffect)((function(){return e(Object(D.c)()),function(){e(Object(D.d)())}}),[]),Object(J.jsxs)("div",{children:["error"===t&&Object(J.jsx)("div",{style:{color:"red"},children:"Some error occurred. Please refresh page"}),Object(J.jsx)(B,{}),Object(J.jsx)(G,{})]})},B=function(){var e=Object(W.d)((function(e){return e.chat.messages})),t=Object(c.useRef)(null),r=Object(c.useState)(!0),a=Object(n.a)(r,2),o=a[0],s=a[1];return Object(c.useEffect)((function(){var e;o&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),Object(J.jsxs)("div",{className:"chat",style:{height:"65vh",overflowY:"auto"},onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!o&&s(!0):o&&s(!1),console.log(Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300)},children:[e.map((function(e,t){return Object(J.jsx)(F,{message:e},e.id)})),Object(J.jsx)("div",{ref:t})]})},F=a.a.memo((function(e){var t=e.message;return console.log(">>>>>>Message"),Object(J.jsxs)("div",{children:[Object(J.jsx)(M,{size:"default",src:t.photo}),Object(J.jsx)("b",{children:t.userName}),Object(J.jsx)("br",{}),t.message,Object(J.jsx)("hr",{})]})})),G=function(){var e=Object(c.useState)(""),t=Object(n.a)(e,2),r=t[0],a=t[1],o=Object(W.d)((function(e){return e.chat.status})),s=Object(W.c)();return Object(J.jsxs)("div",{children:[Object(J.jsx)(A.a.TextArea,{onChange:function(e){return a(e.currentTarget.value)},value:r,rows:4,name:"newPostText",placeholder:"Post",style:{background:"none",resize:"none",marginBottom:10}}),Object(J.jsx)(I.a,{disabled:"ready"!==o,onClick:function(){r&&(s(Object(D.b)(r)),a(""))},children:"Send"})]})};t.default=function(){return Object(J.jsx)("div",{style:{backgroundColor:"rgba(231,231,231,0.54)",padding:10,margin:10,boxShadow:"0 0 4px 2px rgba(138, 138, 138, 0.34)"},children:Object(J.jsx)(V,{})})}}}]);
//# sourceMappingURL=7.b8cc0341.chunk.js.map